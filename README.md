# my-file
<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">① システム一覧画面 (System Asset List)</h3>
  </div>

  <div class="panel-body">
    <div class="search-container well">
      <div class="row">
        <div class="col-md-4">
          <label>アカウントID (Account ID)</label>
          <input type="text" class="form-control" ng-model="c.filter.account_id">
        </div>
        <div class="col-md-4">
          <label>アカウント名 (Account Name)</label>
          <input type="text" class="form-control" ng-model="c.filter.account_name">
        </div>
        <div class="col-md-4">
          <button class="btn btn-primary" ng-click="c.search()">検索 (Search)</button>
          <button class="btn btn-success pull-right" ng-click="c.addItem()">追加 (Add)</button>
        </div>
      </div>
      <div class="row" style="margin-top: 10px;">
        <div class="col-md-4">
          <label>システム名 (System Name)</label>
          <input type="text" class="form-control" ng-model="c.filter.system_name">
        </div>
        <div class="col-md-4">
          <label>サブシステム名 (Subsystem Name)</label>
          <input type="text" class="form-control" ng-model="c.filter.subsystem_name">
        </div>
      </div>
    </div>

    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th style="width: 50px;">No</th>
          <th>アカウントID</th>
          <th>世代</th>
          <th>システム名</th>
          <th>サブシステム名</th>
          <th style="width: 250px;">Action</th> </tr>
      </thead>
      <tbody>
        <tr ng-repeat="item in c.data.items">
          <td>{{$index + 1}}</td>
          <td>{{item.account_id}}</td>
          <td>{{item.generation}}</td>
          <td>{{item.system_name}}</td>
          <td>{{item.subsystem_name}}</td>
          <td>
            <button class="btn btn-info btn-xs" ng-click="c.openDetail(item.sys_id)">詳細</button>
            <button class="btn btn-danger btn-xs" ng-click="c.deleteItem(item)">削除</button>
            <button class="btn btn-default btn-xs" ng-click="c.openDiagram(item.ppt_url)">概要図</button>
          </td>
        </tr>
        <tr ng-if="c.data.items.length == 0">
          <td colspan="6" class="text-center">No data found</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

データの入力漏れ（未入力）に対する2つの対策案について、その概要と実現方法をまとめた日本語版資料です。

---

### 案1：予防的措置（推奨）

**基本方針：** 入力画面でブロックし、未入力のままでは保存させない（強制力を持たせる）。

* **実現の仕組み：**
* 対象フィールドをシステム的に**「必須項目（Mandatory）」**に設定する。


* **具体的な実装方法：**
* **UI Policy**（画面制御）または **Data Policy**（データ制御）を設定する。
* 条件設定で「常に」、または「特定のステータスになった時」に対象フィールドを必須（Mandatory = True）にする。


* **効果・メリット：**
* 入力欄に赤いアスタリスク（*）が表示される。
* オペレーターが未入力のまま保存ボタンを押すと、エラーメッセージが表示され**提出がブロックされる**。
* **メリット：** データの完全性が100%保証され、後から入力を依頼する連絡コストがゼロになる。



---

### 案2：通知による事後措置（ご要望の案）

**基本方針：** 空欄での保存を許容するが、システムが検知してメールで督促・通知を行う。

* **実現の仕組み：**
* データの作成・更新をバックグラウンドで監視し、未入力を検知した瞬間に自動メール送信フローを走らせる。


* **具体的な実装方法：**
* **Flow Designer**（推奨）または **System Notification** を使用する。
* **トリガー（Trigger）：** データが「作成」または「更新」された時。
* **条件（Condition）：** 対象フィールドが「空（Is Empty）」である場合。
* **アクション（Action）：** 事前に用意したテンプレートメールを送信する。
* *宛先：* そのデータの「作成者（Created by）」や「承認グループのマネージャー」を動的に指定可能。




* **効果・メリット：**
* データ自体は保存できる。
* 保存の数秒後に、担当者や管理者に「入力漏れがあります」という通知メールが届く。
* **適用シーン：** 「現時点では情報が不明だが、とりあえずレコードを作成しておきたい」という業務フローの場合に有効。

* はい、**可能です。**
「瞬間的（リアルタイム）」ではなく、**「一定期間（猶予期間）待ってから、それでも未入力の場合に通知する」**という設計は、ServiceNowでよく使われる実装パターンです。

これを**「リマインダー通知（Reminder）」**や**「エスカレーション（Escalation）」**と呼びます。

以下に、その実装イメージとメリットをまとめました。

---

### 修正案2：通知による事後措置（猶予期間あり）

**基本方針：**
保存時はエラーを出さず、入力のための「猶予期間（例：3日間）」を与える。期限を過ぎても未入力のまま放置されている場合のみ、督促メールを送信する。

#### 実装パターンA：Flow Designerの「待機」機能を使う（推奨）

個別のレコードごとにタイマーをセットする方法です。

1. **トリガー：** データが作成された時（かつ必須項目が空欄の時）。
2. **アクション（待機）：** フローを一時停止し、**指定時間（例：3日間）待機させる**。
* *（ServiceNowの `Wait for a duration` アクションを使用）*


3. **再チェック（IF条件）：** 3日経過後、**「まだその項目が空欄のままか？」**をシステムが再確認する。
* **入力済みの場合：** 何もせずフロー終了（メールは送らない）。
* **未入力の場合：** ここで初めて「期限切れ通知メール」を送信する。



#### 実装パターンB：Scheduled Job（定期実行）を使う

毎日決まった時間に一括チェックする方法です。

1. **スケジュール：** 毎日 朝9:00 にシステムが自動巡回する。
2. **スクリプト条件：** 「作成日からXX日以上経過している」かつ「必須項目が空欄」のデータを全て抽出する。
3. **アクション：** 対象データの担当者に対し、「未入力リスト」としてまとめてメールを送る。

---

### この変更によるメリット

* **「とりあえず保存」が可能になる：**
情報を調査中の段階でレコードを作成しても、即座に警告メールが飛んでこないため、オペレーターに精神的なプレッシャーを与えません。
* **オオカミ少年化を防ぐ：**
「保存した瞬間に修正しようと思っていたのにメールが来た」というような、不要なノイズメールを減らすことができます。本当に忘れている時だけ通知が来ます。

---

ご提案の通り、現場の運用フローとしては**「即時通知」よりも「数日後のリマインダー」の方が親切で受け入れられやすい**ケースが多いです。資料には「即時通知型」と「猶予型（リマインダー）」のどちらも選択可能である旨を記載しておくと良いでしょう。

根据您提供的三张Excel/文档截图，这是一套**IT资产管理系统中关于PII（个人隐私信息）治理**的数据结构设计。

这套设计的核心逻辑是：通过“**账号ID**”和“**系统ID**”作为物理资产和逻辑资产的锚点，将PII信息、业务背景、架构信息以及合规风险（悬念事项）串联起来。

以下是按表单位进行的详细分析及关联关系总结：

---

### 1. 核心主数据 (Master Data)

这部分表用于定义标准，防止数据录入混乱（如将“手机号”分别录入为“Mobile”和“Phone”）。

#### **A. PII数据分类标准主表 (PIIデータ分類基準マスタ)**

* **所在位置：** 图3 右下角
* **功能：** 定义PII的敏感等级和分类标准。
* **关键字段：**
* `PII数据分类ID` (PK): 唯一标识。
* `分类名`: 类别名称。
* `PII Level (1-3)`: 敏感度分级（如Level 3为极敏感）。
* `说明/定义`: 具体的业务定义（如：个人情报、车辆情报等）。


* **关联关系：**
* **被引用：** 被 **[B. PII项目主表]** 引用。



#### **B. PII项目主表 (PII項目マスタ)**

* **所在位置：** 图3 右上角
* **功能：** 具体的PII字段字典，实现数据的标准化。
* **关键字段：**
* `PII项目ID` (PK): 唯一标识（如 PII_001）。
* `PII项目名`: 标准名称（如 VIN、位置信息）。
* `PII数据分类ID` (FK): 关联到分类标准。


* **关联关系：**
* **引用：** 关联 **[A. PII数据分类标准主表]**。
* **被引用：** 被 **[C. PII资产台账]** 引用。



---

### 2. 核心业务数据 (Transaction Data)

这是系统的核心台账，记录了“哪里”存了“什么”。

#### **C. PII资产台账 (PII資産台帳)**

* **所在位置：** 图1、图2、图3 的左侧（由于是核心表，三张图都有体现）
* **功能：** 记录哪个云账号下的哪个系统，存储了哪种PII，以及保存多久。
* **关键字段：**
* `账号ID (Account ID)` (PK/FK): 关联云环境（AWS/Azure）。
* `系统ID` (PK/FK): 关联具体的应用系统。
* `PII项目ID` (FK): 关联PII主表，说明存了什么。
* `保存期间日数`: 数据合规要求的保留时间（30天/60天/无期限）。


* **关联关系：**
* **引用：** `PII项目ID` 指向 **[B. PII项目主表]**。
* **作为父表：** 是下方所有“详细管理表”的主索引源。



---

### 3. 详细管理扩展表 (Detail/Sub-tables)

这些表挂载在核心台账之下，用于记录更细维度的合规与运维信息。

#### **D. 对象设计书管理表 (PII資産台帳_対象設計書管理)**

* **所在位置：** 图2 左下
* **功能：** 记录该PII资产对应的技术设计文档，方便审计溯源。
* **关键字段：**
* `账号ID` + `系统ID` + `PII项目ID` (FK): 关联核心台账。
* `对象设计书连番` (PK): 序列号，允许对应多份文档。
* `对象设计书名`: 文档名称。


* **关联关系：**
* 与 **[C. PII资产台账]** 是 **1:N** 关系。



#### **E. 悬念事项表 (PII資産台帳_懸念事項)**

* **所在位置：** 图2 右上
* **功能：** 记录已发现的安全风险或合规隐患。
* **关键字段：**
* `账号ID` + `系统ID`: 关联到具体的环境系统。
* `悬念事项连番` (PK): 序列号。
* `悬念事项`: 风险描述（例如：密码明文保存、权限未隔离）。


* **关联关系：**
* 与 **[C. PII资产台账]** (或账号系统维度) 是 **1:N** 关系。



#### **F. 追加确认事项表 (PII資産台帳_追加確認事項)**

* **所在位置：** 图2 右下
* **功能：** 记录审计过程中发现的信息缺失或待核实项。
* **关键字段：**
* `账号ID` + `系统ID`: 关联键。
* `追加事项连番`: 序列号。
* `追加确认事项`: 描述（例如：从设计书中无法确认XXX的保存期限）。


* **关联关系：**
* 与 **[C. PII资产台账]** (或账号系统维度) 是 **1:N** 关系。



#### **G. 功能概要表 (PII資産台帳_機能概要)**

* **所在位置：** 图3 左下
* **功能：** 存储功能说明文件的附件或路径。
* **关键字段：**
* `账号ID` + `系统ID`: 关联键。
* `连番`: 序列号。
* `功能概要文件`: 文件名或链接。


* **关联关系：**
* 与 **[C. PII资产台账]** 是 **1:N** 关系。



---

### 4. 基础设施与业务背景表 (Context Mapping)

这部分在图1右侧展示，看似是外部系统信息的映射（镜像数据）。

#### **H. 业务・服务信息 (業務・サービス情報)**

* **所在位置：** 图1 右上
* **功能：** 定义业务归属。
* **关键字段：** `账号ID`、`系统ID`、`运行系统名`、`负责人`、`业务内容`。
* **关联关系：** 通过 `账号ID` 和 `系统ID` 与 **[C. PII资产台账]** 关联，回答“这是谁的系统，干什么用的”的问题。

#### **I. 云构成信息 (クラウド構成情報)**

* **所在位置：** 图1 右中
* **功能：** 定义底层基础设施。
* **关键字段：** `账号ID`、`构成基本信息`、`构成信息明细`。
* **关联关系：** 通过 `账号ID` 关联，回答“这个系统跑在哪个AWS/Azure账号上”的问题。

#### **J. 软件信息 (ソフトウェア情報)**

* **所在位置：** 图1 左下
* **功能：** 定义软件资产。
* **关键字段：** `账号ID`、`软件基本信息`。
* **关联关系：** 同样通过 `账号ID` 关联。

---

### 5. 总结：关联关系拓扑图

如果把这些关系画成图，逻辑如下：

1. **分类层级 (从右向左):**
`[PII数据分类标准]` (1) —— (N) `[PII项目主表]` (1) —— (N) `[PII资产台账]`
2. **资产层级 (核心):**
`[PII资产台账]` 是核心事实表，每一行代表：**在这个账号(Account)的这个系统(System)里，存放了这项PII数据。**
3. **详细信息挂载 (向下钻取):**
基于 `[PII资产台账]` (或其账号/系统组合)，挂载了：
* `[设计书]` (依据什么文档开发的？)
* `[悬念事项]` (有什么安全风险？)
* `[追加确认]` (还有什么不清楚的？)
* `[功能概要]` (具体功能文件在哪？)


4. **横向背景关联:**
`[PII资产台账]` 通过 `账号ID/系统ID` 关联到：
* `[业务服务信息]` (业务视角)
* `[云构成信息]` (基建视角)



### 结论

这不仅仅是一个资产清单，而是一个**合规治理导向的元数据管理模型**。它的设计目的非常明确：**以Account ID为抓手，将分散的个人信息（PII）进行标准化登记，并强制关联其对应的合规风险（悬念事项）和设计依据。**
